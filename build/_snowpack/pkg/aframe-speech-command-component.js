if(typeof AFRAME=="undefined")throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerSystem("speech-command",{init:function(){this.entities=[]},registerMe:function(t){this.entities.push(t)},unregisterMe:function(t){var e=this.entities.indexOf(t);this.entities.splice(e,1)},onSceneLoaded:function(t){},play:function(){}}),AFRAME.registerComponent("speech-command",{multiple:!0,schema:{command:{type:"string"},type:{type:"string"},targetElement:{type:"selector"},targetComponent:{type:"string"},function:{type:"string"},attribute:{type:"string"},value:{type:"string"},keyCode:{type:"string"}},init:function(){this.system.registerMe(this),this.data.targetElement||(this.data.targetElement=this.el),this.data.keyCode&&window.addEventListener("keyup",this.onKeyup.bind(this))},remove:function(){this.system.unregisterMe(this)},play:function(){},executeCommand:function(){var t=this.data.targetElement;if(this.data.type=="attribute")t.setAttribute(this.data.attribute,this.data.value);else if(this.data.type=="function"){var e=t.components[this.data.targetComponent];e[this.data.function]()}},onKeyup:function(t){t.keyCode==this.data.keyCode&&this.executeCommand()}}),AFRAME.registerComponent("annyang-speech-recognition",{init:function(){},play:function(){if(annyang){console.log("annyang: "+annyang);for(var t=document.querySelector("a-scene").systems["speech-command"],e={},a={},n=0;n<t.entities.length;n++){var i=t.entities[n];a[i.data.command]=i,e[i.data.command]=function(){}}annyang.addCommands(e),annyang.addCallback("resultMatch",function(o,s,d){var r=a[s];r.executeCommand()}),annyang.start()}}});
